/* Devstratum JQP Graph | v0.9 | GNU GPL v3.0 | Author: Sergey Osipov | https://devstratum.ru | info@devstartum.ru | https://github.com/devstratum/Devstratum-JQP-Graph */
!function(r){"function"==typeof define&&define.amd?define(["jquery"],r):"undefined"!=typeof exports?module.exports=r(require("jquery")):r(jQuery)}(function(t){var i={title:"",description:"",unit:"",better:"",type:"number",separate:!1,grid_wmax:0,grid_part:5,points:[],graphs:[]};function v(r,t){var i="";return i+='<div class="dvstr-graph__grid">',i+='<div class="dvstr-graph__grid-hrz"></div>',i+='<div class="dvstr-graph__grid-vrt">'+function(r,t){for(var i=0,a="",s=100/t,e=Math.round(r/t);i<t;){a+='<div class="dvstr-graph__grid-vrt-line" style="left:'+Math.floor(i*s)+'%;"><span>'+i*e+"</span></div>",i++}return a}(r,t)+"</div>",i+='<div class="dvstr-graph__grid-end"><span>'+r+"</span></div>",i+="</div>"}function l(r){var t="";t+='<div class="dvstr-graph__header">',r.title&&(t+='<div class="dvstr-graph__title">'+r.title+"</div>"),t+='<div class="dvstr-graph__header-flex">',r.unit&&(t+='<div class="dvstr-graph__header-flex-item">',t+='<div class="dvstr-graph__unit">'+r.unit+"</div>",t+="</div>");var i=function(r){var i="";"object"==typeof r.points&&(i+='<div class="dvstr-graph__point">',r.points.forEach(function(r){var t="";r.color&&(t="background: "+r.color+";"),r.title&&(i+='<div class="dvstr-graph__point-item">',i+='<span class="dvstr-graph__point-item-color" style="'+t+';"></span>',i+='<span class="dvstr-graph__point-item-title">'+r.title+"</span>",i+="</div>")}),i+="</div>");return i}(r);return i&&(t+='<div class="dvstr-graph__header-flex-item">',t+=i,t+="</div>"),r.better&&(t+='<div class="dvstr-graph__header-flex-item">',t+='<div class="dvstr-graph__better">('+r.better+")</div>",t+="</div>"),t+="</div>",r.description&&(t+='<div class="dvstr-graph__description">'+r.description+"</div>"),t+="</div>"}function a(r,t){var n,p,o,i=function(r){var t=0;if(r.grid_wmax&&"number"==typeof r.grid_wmax)t=r.grid_wmax;else{var i=0;"object"==typeof r.graphs&&r.graphs.forEach(function(r){r.value.forEach(function(r){i<r&&(i=r)})}),t=100<i?100*Math.ceil(i/100):Math.ceil(i)}return t}(t),a=v(i,t.grid_part),s=l(t),e=(p=i,o="","object"==typeof(n=t).graphs&&n.graphs.forEach(function(d){if(o+='<div class="dvstr-graph__item">',o+='<div class="dvstr-graph__label">'+d.label+"</div>",o+='<div class="dvstr-graph__group">',d.value){var v=999;d.value.forEach(function(r,t){if("number"==typeof r){var i="z-index: "+v--+";",a="width: "+(r/p*100).toFixed(4)+"%;",s="";d.color&&(s="background: "+d.color[t]+";");var e="position: absolute;";n.separate&&(e="position: relative;"),o+='<div class="dvstr-graph__line" style="'+a+s+e+i+'">',o+="<span>"+r+"</span>",o+="</div>"}})}o+="</div>",o+="</div>"}),o),d="";d+='<div class="dvstr-graph">',d+=s,i&&(d+='<div class="dvstr-graph__body">',d+=a,d+=e,d+="</div>"),d+="</div>",r.append(d)}var s={init:function(r){a(this,t.extend({},i,r))}};t.fn.dvstr_graph=function(r){return s[r]?s[r].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof r&&r?(t.error("dvstr_graph method: "+r+"not found"),!0):s.init.apply(this,arguments)}});